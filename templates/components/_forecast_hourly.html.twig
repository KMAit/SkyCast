{# Usage examples:
   Minimal with placeholder:
   {% include 'components/_forecast_hourly.html.twig' %}

   With data:
   {% include 'components/_forecast_hourly.html.twig' with {
     hours: [
       { time: '14:00', temp: '22°C', wind: '12 km/h', precip: '10%' },
       { time: '15:00', temp: '23°C', wind: '14 km/h', precip: '5%'  },
       { time: '16:00', temp: '23°C', wind: '20 km/h', precip: '0%'  },
     ]
   } %}
#}

<section class="card section-gap">
  <h2 class="h2">
    <svg class="icon" aria-hidden="true"><use href="#icon-clock"/></svg>
    <span>Prévision horaire</span>
  </h2>

  {% if hours is not defined or hours is empty %}
    <p class="muted">— en attente de résultats —</p>
  {% else %}
    <div class="grid grid-3" role="list" aria-label="Prévision horaire">
      {% for h in hours %}
        <article class="card" role="listitem" aria-label="Heure {{ h.time|default('—') }}">
          <div class="small muted">
            {{ h.time is defined and h.time ? h.time|format_datetime(locale='fr', timezone='Europe/Paris', pattern="EEE HH:mm") : '—:—' }}
          </div>

          <div style="margin-top:8px">
            <div><strong>Temp.</strong> : {{ h.temp|default(h.temperature|default('—')) }}</div>
            <div><strong>Vent</strong> : {{ h.wind is not null ? (h.wind ~ ' km/h') : '—' }}</div>
            <div>
              <strong>Précip.</strong> :
              {% if h.precip is not null %}
                {{ h.precip_label }} <span class="muted small">({{ h.precip|number_format(1, '.', '') }} mm)</span>
              {% else %}
                —
              {% endif %}
            </div>


            {# Icon + label row (show if either exists) #}
            {% set has_icon = h.icon is defined and h.icon %}
            {% set has_label = h.label is defined and h.label %}

            {% if has_icon or has_label %}
              <div style="display:flex; align-items:center; gap:6px;">
                {% if has_icon %}
                  <svg class="icon" aria-hidden="true"><use href="#icon-{{ h.icon }}"/></svg>
                {% endif %}
                {% if has_label %}
                  <div class="small muted">{{ h.label }}</div>
                {% endif %}
              </div>
            {% endif %}
          </div>
        </article>
      {% endfor %}
    </div>
  {% endif %}
</section>
