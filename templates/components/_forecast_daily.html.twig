{# Daily forecast component
  Usage examples:

  {% include 'components/_forecast_daily.html.twig' with {
    days: [
      { date: '2025-09-19', tmin: 12.3, tmax: 22.1, precip_mm: 0.0, weathercode: 3 },
      { date: '2025-09-20', tmin: 11.0, tmax: 20.4, precip_mm: 1.2, weathercode: 61 }
    ]
  } %}
#}

{# Daily forecast (7 days) — cards with icon + label + t° min/max + precip #}
<section class="card section-gap">
  <h2 class="h2">
    <svg class="icon" aria-hidden="true"><use href="#icon-cloud"/></svg>
    <span>Prévisions sur 7 jours</span>
  </h2>

  {% if days is not defined or days is empty %}
    <p class="muted">— en attente de résultats —</p>
  {% else %}
    <div class="grid grid-3" role="list" aria-label="Prévision journalière">
      {% for d in days %}
        {% set day_label = (d.date ?? '') ? d.date|format_date(locale='fr', pattern='EEE dd/MM') : '—' %}

        <article class="card" role="listitem" aria-label="Jour {{ day_label }}">
          <div class="small muted">{{ day_label }}</div>

          <div style="margin-top:8px; display:flex; align-items:center; justify-content:space-between; gap:12px;">
            <div>
              <div><strong>Max</strong> : {{ d.tmax is defined and d.tmax is not null ? (d.tmax|number_format(1, '.', '')) ~ '°C' : '—' }}</div>
              <div><strong>Min</strong> : {{ d.tmin is defined and d.tmin is not null ? (d.tmin|number_format(1, '.', '')) ~ '°C' : '—' }}</div>
            </div>
            <div style="text-align:right">
              <div style="text-align:right">
                <div><strong>Pluie</strong> : {{ d.precip_mm is defined and d.precip_mm is not null ? (d.precip_mm|number_format(1, '.', '')) ~ ' mm' : '—' }}</div>

                {# Weather icon + label #}
                <div style="margin-top:6px; display:flex; align-items:center; gap:6px; justify-content:flex-end">
                  <svg class="icon" style="width:22px;height:22px" aria-hidden="true">
                    <use href="#icon-{{ d.icon|default('na') }}"/>
                  </svg>
                  <span class="small muted">{{ d.label|default('—') }}</span>
                </div>
              </div>
            </div>
          </div>
        </article>
      {% endfor %}
    </div>
  {% endif %}
</section>
