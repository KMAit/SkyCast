{# Templates: Hourly/Daily chart #}
<section class="card section-gap">
  <div class="header-row" style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;">
    <h2 class="h2" style="margin:0;">
      <svg class="icon" aria-hidden="true"><use href="#icon-thermo"/></svg>
      <span>Évolution (heures / jours)</span>
    </h2>

    {# Mode toggle (Heures ↔ Jours) #}
    <label class="switch switch--compact" for="chartMode">
      <span class="switch-label">Heures</span>
      <input id="chartMode" type="checkbox" aria-label="Basculer entre Heures et Jours">
      <span class="slider" aria-hidden="true"></span>
      <span class="switch-label">Jours</span>
    </label>
  </div>

  {% set has_hourly = hours is defined and hours is not empty %}
  {% set has_daily = days is defined and days is not empty %}

  {% if not has_hourly and not has_daily %}
    <div class="chart-wrap">
      <div class="skel skel-chart"></div>
    </div>
  {% else %}
    <div class="chart-wrap">
      <canvas
        id="hourlyChart"
        role="img"
        aria-label="Graphique météo: Heures et Jours"
        {# Hourly payload #}
        data-hours="{{ (hours|default([]))|json_encode|e('html_attr') }}"
        {# Daily payload: expects array with keys date, tmax, precip_mm, uv_index_max #}
        data-days="{{ (days|default([]))|json_encode|e('html_attr') }}"
      ></canvas>
    </div>
  {% endif %}
</section>
